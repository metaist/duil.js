<!DOCTYPE html>
<html><head>
  <title>React.js Examples</title>
  <style>
    body { font-family: Arial, sans-serif; }

    h1, h2 {
      margin: 1.5rem 0 0.5rem 0;
      text-align: center;
    }

    .example {
      margin: 0 auto;
      border: 0.1rem solid #ccc;
      padding: 1rem;
      max-width: 50%;
    }
  </style>
</head><body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.13.1/lodash.min.js"></script>
<script src="../dist/duil.js"></script>

<!-- See: http://facebook.github.io/react/ -->
<h1>React.js Examples using duil.js</h1>

<h2>A Simple Component</h2>
<div id="ex-1" class="example"></div>
<script>
var HelloMessage = duil.Widget({
  $dom: $('#ex-1'),
  name: '',

  // @override
  render: function () {
    this.$dom.text('Hello ' + this.name);
    return this;
  }
});

HelloMessage.set({name: 'John'});
</script>

<h2>A Stateful Component</h2>
<div id="ex-2" class="example"></div>
<script>
var Timer = duil.Widget({
  $dom: $('#ex-2'),
  interval: false,
  secondsElapsed: 0,

  // @override
  init: function () {
    this.interval = window.setInterval(this.tick, 1000);
    return this;
  },

  destroy: function () {
    window.clearInterval(this.interval);
    return this;
  },

  tick: function () {
    this.set({secondsElapsed: this.secondsElapsed + 1});
    return this;
  },

  // @override
  render: function () {
    this.$dom.text('Seconds Elapsed: ' + this.secondsElapsed);
    return this;
  }
});
</script>

<h2>An Application</h2>
<div id="ex-3" class="example">
  <h3>TODO</h3>
  <ul>
    <li></li>
  </ul>
  <form>
    <input />
    <button></button>
  </form>
</div>
<script>
var TodoList = new duil.List({
  $dom: $('#ex-3 ul'),
  selector: 'li',

  // @override
  key: function (item, index) {
    return this.$dom.find('#' + index + item);
  },

  // @override
  update: function (item, index, $item) {
    $item
      .attr('id', index + item)
      .text(item);
    return this;
  }
});

var TodoApp = duil.Widget({
  $dom: $('#ex-3'),
  data: [],
  text: '',

  // @override
  init: function () {
    this.$dom
      .on('change', 'input', this.change)
      .on('submit', 'form', this.submit);
    return this;
  },

  // @override
  render: function () {
    this.$dom
      .find('input').val(this.text).end()
      .find('button').text('Add #' + (this.data.length + 1)).end();

    TodoList.set({data: this.data});
    return this;
  },

  change: function (e) {
    this.set({text: e.target.value});
    return this;
  },

  submit: function (e) {
    e.preventDefault();
    var nextItems = this.data.concat([this.text]);
    var nextText = '';
    this.set({data: nextItems, text: nextText});
    this.$dom.find('input').focus();
    return false;
  }
});
</script>

<h2>A Component Using External Plugins</h2>
<div id="ex-4" class="example">
  <h3>Input</h3>
  <textarea></textarea>

  <h3>Output</h3>
  <div class="content"></div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.5/marked.min.js"></script>
<script>
var MarkdownEditor = duil.Widget({
  $dom: $('#ex-4'),
  value: 'Type some *markdown* here!',

  // @override
  init: function () {
    this.$dom
      .on('keyup', 'textarea', this.keyup);
    this.$text = this.$dom.find('textarea').val(this.value);
    return this;
  },

  keyup: function (e) {
    this.set({value: this.$text.val()});
    return this;
  },

  // @override
  render: function () {
    this.$dom
      .find('.content').html(marked(this.value)).end();
    return this;
  }
});
</script>
</body></html>
