<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Widget.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="duil.Widget.html">Widget</a><ul class='methods'><li data-type='method'><a href="duil.Widget.html#init">init</a></li><li data-type='method'><a href="duil.Widget.html#render">render</a></li><li data-type='method'><a href="duil.Widget.html#set">set</a></li><li data-type='method'><a href="duil.Widget.html#invoke">invoke</a></li></ul></li><li><a href="duil.Group.html">Group</a><ul class='methods'><li data-type='method'><a href="duil.Group.html#.KEY_BY_ID">KEY_BY_ID</a></li><li data-type='method'><a href="duil.Group.html#key">key</a></li><li data-type='method'><a href="duil.Group.html#create">create</a></li><li data-type='method'><a href="duil.Group.html#update">update</a></li><li data-type='method'><a href="duil.Group.html#remove">remove</a></li><li data-type='method'><a href="duil.Group.html#render">render</a></li><li data-type='method'><a href="duil.Group.html#init">init</a></li><li data-type='method'><a href="duil.Group.html#set">set</a></li><li data-type='method'><a href="duil.Group.html#invoke">invoke</a></li></ul></li><li><a href="duil.List.html">List</a><ul class='methods'><li data-type='method'><a href="duil.List.html#key">key</a></li><li data-type='method'><a href="duil.List.html#create">create</a></li><li data-type='method'><a href="duil.List.html#update">update</a></li><li data-type='method'><a href="duil.List.html#remove">remove</a></li><li data-type='method'><a href="duil.List.html#render">render</a></li><li data-type='method'><a href="duil.List.html#init">init</a></li><li data-type='method'><a href="duil.List.html#set">set</a></li><li data-type='method'><a href="duil.List.html#invoke">invoke</a></li></ul></li></ul><h3>Externals</h3><ul><li><a href="external-_jQuery.fn_.html">jQuery.fn</a><ul class='methods'><li data-type='method'><a href="external-_jQuery.fn_.html#.set">set</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="duil.html">duil</a><ul class='members'><li data-type='member'><a href="duil.html#.version">version</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Widget.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as _ from './lodash';

/**
  @classdesc A widget is an object that re-renders when its data changes.
  @summary Object that re-renders when its data changes.
  @memberof duil
  @description
  * The constructor defines the initial properties and then calls
  * [.init()](#init) followed by [.render()](#render).
  *
  * Properties that are functions are bound so that `this` refers to the widget
  * itself so that they act like methods of the widget.
  *
  * In general, you should use [.set()](#set) to update properties which will
  * call [.render()](#render) if any of the properites are actually changed.
  *
  * Unlike previous versions of duil, the use of the `new` keyword is required.

  @param {Object} props Initial properties of this object.
  @example
  * var thing = new duil.Widget({
  *   value: 5,
  *   method: function () { return this.value; }
  * });
  *
  * // properties are added as expected
  * console.log(thing.value);
  * // => 5
  *
  * // functions are bound to the widget
  * console.log(thing.method());
  * // => 5

  */
class Widget {
  constructor(props) {
    this.set(props, false);
    this.init();
    this.render();
  }

  /**
    @summary Initialize the widget.
    @description
    * This method is called when the widget is constructed. Instances will often
    * override this method.
    *
    * The default method does nothing but return the widget.
    *
    * Common uses of the [.init()](#init) method:
    *   - binding event handlers
    *   - triggering one-time operations (e.g., ajax requests)

    @returns {duil.Widget} Returns the widget itself for chaining.
    @example
    * var MyWidget = new duil.Widget({
    *   // @override
    *   init: function () {
    *     this.value = 42;
    *     return this;
    *   }
    * });
    *
    * console.log(MyWidget.value);
    * // => 42
    */
  init() { return this; }

  /**
    @summary Render the widget based on its state.
    @description
    * This method is called when the widget is constructed and when the
    * properties are changed using [.set()](#set).
    *
    * Subclasses and instances should override this method.
    *
    * **NOTE**: This method does not take any parameters; the goal of this
    * method is to make the widget reflect the current state. Because this
    * method may be called frequently, it is best not to use expensive
    * operations and to make calls idempotent--don't change things that are
    * already in the correct state.
    *
    * duil provides a utility function for jQuery called
    * [.set](./external-_jQuery.fn_.html#.set) to help set attributes of DOM
    * nodes in an idempotent way.

    @returns {duil.Widget} Returns the widget itself for chaining.
    @example
    * var MyWidget = new duil.Widget({
    *   $dom: $('#my-widget'),
    *   count: 0,
    *
    *   // @override
    *   init: function () {
    *     this.$dom.click(this.click);
    *     return this;
    *   },
    *
    *   // @override
    *   render: function () {
    *     this.$dom.text(this.count);
    *     return this;
    *   },
    *
    *   // increment the count when the widget is clicked
    *   click: function () {
    *     this.set({count: this.count + 1});
    *     return this;
    *   }
    * });
    */
  render() { return this; }

  /**
    @summary Update properties of the widget.
    @description
    * The `force` parameter controls when `.render()` is called:
    *    - If `true`, always call `.render()`.
    *    - If `false`, never call `.render()`.
    *    - Otherwise (e.g. `undefined`), only call `.render()` when the
    *      properties are actually changed.

    @param {Object} props The new widget properties.
    @param {boolean} [force] Force calling `.render()` after property updates.
    @returns {duil.Widget} Returns the widget itself for chaining.
    @example
    * var MyWidget = new duil.Widget({
    *   'stats.count': 42
    * });
    *
    * MyWidget.set({'stats.count': MyWidget.stats.count + 1});
    * console.log(MyWidget.stats.count);
    * // => 43
    */
  set(props, force) {
    var doRender = false;
    if (true === force || false === force) { // cheap; no checking
      doRender = force;
      _.forOwn(props, (val, prop) => {
        _.set(this, prop, _.isFunction(val) ? val.bind(this) : val);
      });
    } else { // expensive; equality checking
      _.forOwn(props, (val, prop) => {
        if (!_.isEqual(_.get(this, prop), val)) {
          _.set(this, prop, _.isFunction(val) ? val.bind(this) : val);
          doRender = true;
        }// end if: changed properties are updated
      });
    }// end if: check force rendering

    if (doRender) { this.render(); } //
    return this;
  }

  /**
    @summary Invoke a method from another class in the context of this widget.
    @param {Widget} parent The class with the method to invoke.
    @param {string} name The name of the method to invoke.
    @param {...*} args The arguments to pass to the method.
    @returns {*} Returns the result of invoking the method.
    */
  invoke(parent, name, ...args) {
    return parent.prototype[name].apply(this, args);
  }
}

export default Widget;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
